<div class="profile-page">
  <div class="container">
    <h1 class="page-title">My Profile</h1>

    <!-- User Details Card -->
    <div class="card">
      <h2 class="card-title">User Details</h2>
      <div class="form-grid">
        <div class="form-group">
          <label>Name</label>
          <input class="form-control" [(ngModel)]="editName" placeholder="Your name" />
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input class="form-control" [(ngModel)]="editPhone" placeholder="Phone number" />
        </div>
      </div>
      <button class="btn btn-primary" (click)="saveUserDetails()" [disabled]="isSavingUser">Save Details</button>
    </div>

    <!-- Address Management Card -->
    <div class="card">
      <div class="card-header">
        <h2 class="card-title">Addresses</h2>
        <button class="btn btn-outline" (click)="openAddAddress()">Add Address</button>
      </div>

      <!-- Address list -->
      <div class="address-list" *ngIf="addresses.length; else noAddresses">
        <div class="address-item" *ngFor="let addr of addresses">
          <div class="addr-main">
            <div class="addr-line">
              <span class="addr-type">{{addr.type | titlecase}}</span>
              <span class="addr-name">{{addr.name}}</span>
              <span class="badge" *ngIf="addr.isDefault">Default</span>
            </div>
            <div class="addr-text">{{addr.street}}, {{addr.city}}, {{addr.state}} - {{addr.pincode}}</div>
            <div class="addr-landmark" *ngIf="addr.landmark">Near {{addr.landmark}}</div>
          </div>
          <div class="addr-actions">
            <button class="btn btn-secondary" (click)="editAddress(addr)">Edit</button>
            <button class="btn btn-outline" (click)="setDefaultAddress(addr.id)" [disabled]="$any(addr).isDefault">Make Default</button>
            <button class="btn btn-danger" (click)="deleteAddress(addr.id)">Delete</button>
          </div>
        </div>
      </div>
      <ng-template #noAddresses>
        <div class="empty">No addresses added yet.</div>
      </ng-template>

      <!-- Address form -->
      <div class="address-form" *ngIf="showAddressForm">
        <div class="form-grid">
          <div class="form-group">
            <label>Type</label>
            <select class="form-control" [(ngModel)]="addressForm.type">
              <option value="home">Home</option>
              <option value="work">Work</option>
              <option value="other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label>Name</label>
            <input class="form-control" [(ngModel)]="addressForm.name" placeholder="Receiver name" />
          </div>
          <div class="form-group full">
            <label>Street</label>
            <input class="form-control" [(ngModel)]="addressForm.street" placeholder="Street, area" />
          </div>
          <div class="form-group">
            <label>City</label>
            <input class="form-control" [(ngModel)]="addressForm.city" />
          </div>
          <div class="form-group">
            <label>State</label>
            <input class="form-control" [(ngModel)]="addressForm.state" />
          </div>
          <div class="form-group">
            <label>Pincode</label>
            <input class="form-control" [(ngModel)]="addressForm.pincode" maxlength="6" />
          </div>
          <div class="form-group full">
            <label>Landmark</label>
            <input class="form-control" [(ngModel)]="addressForm.landmark" placeholder="Optional" />
          </div>
          <div class="form-check full">
            <label><input type="checkbox" [(ngModel)]="addressForm.isDefault" /> Set as default</label>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-secondary" (click)="cancelAddressForm()">Cancel</button>
          <button class="btn btn-primary" (click)="saveAddress()" [disabled]="isSavingAddresses">Save Address</button>
        </div>
      </div>
    </div>
  </div>
</div>


